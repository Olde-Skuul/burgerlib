;
; Test if a float is a NaN
;
; Done in assembly, because that's how you know it's done right
; PowerPC PEF version
;

	INCLUDE 'macros.ppc'

;
; Unmangled function prototype
; uint_t Burger::is_NaN(float) BURGER_NOEXCEPT
;

	EXPORT is_NaN__6BurgerFf[DS]
	EXPORT is_NaN__6BurgerFf[PR]

	DeclareProc is_NaN__6BurgerFf

; Perform a NaN test
	fcmpu	cr0, fp1, fp1

; Move cr0 into r0
	mfcr	r0

; (Flags>>28)&1 Grab the "Unordered" flag
	extrwi	r3, r0, 1, 3
	blr

	END
